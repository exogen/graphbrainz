[
  [
    "getBrowseURL() generates a browse URL",
    [
    ]
  ],
  [
    "getLookupURL() generates a lookup URL",
    [
    ]
  ],
  [
    "getSearchURL() generates a search URL",
    [
    ]
  ],
  [
    "lookup() sends a lookup query",
    [
      {
        "body": "",
        "method": "GET",
        "path": "/ws/2/artist/c8da2e40-bd28-4d4e-813a-bd2f51958ba8?fmt=json",
        "rawHeaders": [
          "Date",
          "Wed, 14 Apr 2021 05:28:51 GMT",
          "Content-Type",
          "application/json; charset=utf-8",
          "Transfer-Encoding",
          "chunked",
          "Connection",
          "close",
          "Vary",
          "Accept-Encoding",
          "X-RateLimit-Limit",
          "1200",
          "X-RateLimit-Remaining",
          "820",
          "X-RateLimit-Reset",
          "1618378131",
          "Server",
          "Plack::Handler::Starlet",
          "ETag",
          "W/\"29f6ba3cf236c7db81cbddf094cad5a5\"",
          "Access-Control-Allow-Origin",
          "*",
          "X-Cache-Status",
          "STALE"
        ],
        "reqheaders": {
          "accept": "application/json",
          "accept-encoding": "gzip, deflate, br",
          "host": "musicbrainz.org"
        },
        "response": "{\"name\":\"Lures\",\"sort-name\":\"Lures\",\"gender\":null,\"area\":{\"disambiguation\":\"\",\"type\":null,\"type-id\":null,\"id\":\"10adc6b5-63bf-4b4e-993e-ed83b05c22fc\",\"sort-name\":\"Seattle\",\"name\":\"Seattle\"},\"ipis\":[],\"type\":\"Group\",\"end_area\":null,\"begin-area\":{\"disambiguation\":\"\",\"type\":null,\"type-id\":null,\"id\":\"10adc6b5-63bf-4b4e-993e-ed83b05c22fc\",\"name\":\"Seattle\",\"sort-name\":\"Seattle\"},\"end-area\":null,\"type-id\":\"e431f5f6-b5d2-343d-8b36-72607fffb74b\",\"id\":\"c8da2e40-bd28-4d4e-813a-bd2f51958ba8\",\"life-span\":{\"ended\":false,\"begin\":\"2013\",\"end\":null},\"isnis\":[],\"gender-id\":null,\"disambiguation\":\"Seattle trio\",\"country\":null,\"begin_area\":{\"disambiguation\":\"\",\"type\":null,\"type-id\":null,\"id\":\"10adc6b5-63bf-4b4e-993e-ed83b05c22fc\",\"name\":\"Seattle\",\"sort-name\":\"Seattle\"}}",
        "responseIsBinary": false,
        "scope": "http://musicbrainz.org:80",
        "status": 200
      }
    ]
  ],
  [
    "rejects non-MusicBrainz errors",
    [
    ]
  ],
  [
    "rejects the promise when the API returns an error",
    [
      {
        "body": "",
        "method": "GET",
        "path": "/ws/2/artist/5b11f4ce-a62d-471e-81fc-a69a8278c7da?inc=foobar&fmt=json",
        "rawHeaders": [
          "Date",
          "Wed, 14 Apr 2021 06:03:51 GMT",
          "Content-Type",
          "application/json; charset=utf-8",
          "Content-Length",
          "144",
          "Connection",
          "close",
          "X-RateLimit-Limit",
          "1200",
          "X-RateLimit-Remaining",
          "939",
          "X-RateLimit-Reset",
          "1618380232",
          "Server",
          "Plack::Handler::Starlet",
          "ETag",
          "\"edf56d2f5065e02997567bb6f901f41b\"",
          "Access-Control-Allow-Origin",
          "*"
        ],
        "reqheaders": {
          "accept": "application/json",
          "accept-encoding": "gzip, deflate, br",
          "host": "musicbrainz.org"
        },
        "response": {
          "error": "foobar is not a valid inc parameter for the artist resource.",
          "help": "For usage, please see: https://musicbrainz.org/development/mmd"
        },
        "responseIsBinary": false,
        "scope": "http://musicbrainz.org:80",
        "status": 400
      }
    ]
  ],
  [
    "uses the default error impementation if there is no JSON error",
    [
    ]
  ]
]
